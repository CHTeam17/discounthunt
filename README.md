About Wishlist Java
===================
This is an example implementation of the YaaS "Wishlist" RAML based on Java. It uses the RAML definition generated by the SDK without modifications. It shows how to implement a basic service and how to integrate with other services on YaaS.

API Console
-----------

You can open the API Console in a separate window by using the following links: 
- [API Console - Internal](http://java-wishlist-v1.cf3.hybris.com)
- [API Console - External](https://api.stage.yaas.io/serviceexamples/javawishlist/v1)


Tenant Information
------------------

You can use `wishlistexamples` as value for `hybris-tenant` (a.k.a. project id) as a sandbox when experimenting with the service.


API Overview
------------

This service provides REST endpoints for interacting with several YaaS core and commerce services.

### Document Repository
The endpoint `/wishlists` enables you to:
- Interact with wishlists in a CRUD fashion
  - Get a list of all wishlists within a tenant
  - Create a new wishlist
  - Get a specific wishlist based on an id
  - Update a specific wishlist based on an id
  - Delete a specific wishlist based on an id
  
See also [WishlistService.java](src/main/java/com/sap/wishlist/service/WishlistService.java).

### Email Service
A mail is sent to the wishlist owner when a wishlist is created. For more details, have a look at method `sendMail` in [WishlistService.java](src/main/java/com/sap/wishlist/service/WishlistService.java).

### Media Repository
The endpoint `/wishlists/{wishlistId}/media` enables you to:
  - Get a list of all media for the wishlist
  - Create a new medium
  - Delete a specific medium based on an id

See also [WishlistMediaService.java](src/main/java/com/sap/wishlist/service/WishlistMediaService.java)

### Customer Service
When a wishlist is being created, then the implementation checks if its owner exists as customer. 
You can find the details at the beginning of the `post` method in [WishlistService.java](src/main/java/com/sap/wishlist/service/WishlistService.java).

Purpose & Benefits
------------------

Showcase how a service can be written using Java. Demonstrate the integration with other services on YaaS, including authentication. Topics covered:
- Usage of Spring framework
- Property handling
- Authentication with YaaS platform
- Consumption of YaaS services
- Deployment to CloudFoundry
- Testing


Dependencies
------------

- Core Services
  - [OAuth2 Service](https://devportal.yaas.io/services/oauth2/latest/index.html)
  - [Document Repository](https://devportal.yaas.io/services/documentrepository/latest/index.html)
  - [Email](https://devportal.yaas.io/services/email/latest/index.html)
  - [Media Repository](https://devportal.yaas.io/services/mediarepository/latest/index.html)
  - [Customer](https://devportal.yaas.io/services/customer/latest/index.html)


How to Build and Test
---------------------

In the Builder, you need a project containing a subscription to the package "YaaS Service Examples" from the team "serviceexamples". Alternatively, you can use our sandbox test tenant `wishlistexamples`.

You need to create a customer in your tenant and store it as `CUSTOMER`in [TestConstants.java](src/test/java/com/sap/wishlist/api/TestConstants.java).

Use `mvn clean install` to build the service and run the tests.


FAQ / Troubleshooting
---------------------

If you get failed tests while building with `mvn clean install`, e.g. *"response code expected:201 but was:500"*, 
then it probably means that the test cannot connect to the core services due to your proxy settings.

Hint: In that case, you might want to try it out with:

    mvn clean install -Dhttp.proxyPort=8080 -Dhttp.proxyHost=proxy.wdf.sap.corp -Dhttps.proxyPort=8080 -Dhttps.proxyHost=proxy.wdf.sap.corp
